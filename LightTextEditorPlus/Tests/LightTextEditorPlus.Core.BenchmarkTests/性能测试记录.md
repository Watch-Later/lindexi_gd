# 性能测试记录

## 7d4a19cc5eeb09a1fa34c2f83ed162b23c6e0734

对每个字符的布局节省一个数组的创建

|     Method |                 text |            Mean |         Error |        StdDev |      Gen0 |      Gen1 |     Gen2 |   Allocated |
|----------- |--------------------- |----------------:|--------------:|--------------:|----------:|----------:|---------:|------------:|
| AppendText |                  123 |        609.0 ns |      11.67 ns |       9.11 ns |    0.4129 |         - |        - |     1.69 KB |
| AppendText |  1231(...)3123 [180] |     15,231.1 ns |     294.33 ns |     289.07 ns |    6.1340 |         - |        - |    25.13 KB |
|   LongText | TTT(...)TTT [100000] | 25,938,670.8 ns | 414,858.20 ns | 388,058.62 ns | 2187.5000 | 1093.7500 | 500.0000 | 12987.59 KB |

## 2bb428e2d633a9eb4d8e8c0d9d7b2d52ff0d4d82

|     Method |                 text |            Mean |         Error |          StdDev |      Gen0 |      Gen1 |     Gen2 |   Allocated |
|----------- |--------------------- |----------------:|--------------:|----------------:|----------:|----------:|---------:|------------:|
| AppendText |                  123 |        669.4 ns |      13.38 ns |        23.79 ns |    0.4416 |         - |        - |      1.8 KB |
| AppendText |  1231(...)3123 [180] |     17,325.7 ns |     345.02 ns |       656.44 ns |    7.8735 |         - |        - |    32.16 KB |
|   LongText | TTT(...)TTT [100000] | 33,275,238.0 ns | 659,844.83 ns | 1,738,295.20 ns | 2866.6667 | 1400.0000 | 600.0000 | 16893.65 KB |

## 220f30a53feae9d4074ddacc0e11ca4b46700abb

将 Run 拆分为 CharData 之后

|     Method |                 text |            Mean |           Error |          StdDev |      Gen0 |      Gen1 |     Gen2 |   Allocated |
|----------- |--------------------- |----------------:|----------------:|----------------:|----------:|----------:|---------:|------------:|
| AppendText |                  123 |        608.4 ns |        11.47 ns |        18.85 ns |    0.4530 |         - |        - |     1.85 KB |
| AppendText |  1231(...)3123 [180] |     14,168.9 ns |       250.63 ns |       234.44 ns |    8.5602 |         - |        - |    34.97 KB |
|   LongText | TTT(...)TTT [100000] | 48,370,846.6 ns | 1,603,462.69 ns | 4,727,845.92 ns | 3363.6364 | 1545.4545 | 636.3636 | 18456.16 KB |

## 272620dbf0e1d7ea93184947e3e615cb8e5fb7b3

加上性能测试

|     Method |                 text |           Mean |         Error |        StdDev |      Gen0 |     Gen1 |     Gen2 |   Allocated |
|----------- |--------------------- |---------------:|--------------:|--------------:|----------:|---------:|---------:|------------:|
| AppendText |                  123 |       775.2 ns |      15.46 ns |      29.42 ns |    0.4854 |        - |        - |     1.98 KB |
| AppendText |  1231(...)3123 [180] |    12,467.0 ns |     193.32 ns |     206.85 ns |    5.8136 |        - |        - |    23.81 KB |
|   LongText | TTT(...)TTT [100000] | 9,823,145.3 ns | 194,569.12 ns | 224,066.09 ns | 2093.7500 | 921.8750 | 921.8750 | 11911.14 KB |