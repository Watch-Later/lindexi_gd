# 术语

## 行和段

文本里面又多个段落组成，一个段落里面有多个行，一个行里面有多个字符，相邻的使用相同的字符属性的字符组成了 TextRun 文本块

在字符串里面，输入 `\r\n` 换行符时，换的是段落而不是行。行是布局的概念，只有布局完成，才能知道行。段落是文档和布局的概念，在输入完成之后，即可获取到段落

## Char 和 Run

相邻的使用相同的字符属性的 Char 字符组成了 TextRun 文本块

一个 Run 里面可以包含多个 Char 字符

在 Run 里面，除了包含 Char 字符之外，还包含了这些字符的 RunProperty 字符属性

## 扩展字符

相对于文本字符来说，允许业务层随意进行扩展的字符，可以是其他元素，例如图片等。只需要实现对应的字符排版功能，即可加入排版

## 换行符

由于多个平台有不同的换行符的定义，为了统一，在文本库里，采用 `\r\n` 作为换行符。排版逻辑里，也依赖此实现。获取字符数量时，段落之间的换行符，采用的是 `\r\n` 两个字符

也就是即使输入的是 `1\n23` 字符串，获取字符数量，将会是 5 个字符

## 不可变对象

由于文本库需要做大量的缓存，为了解决缓存被修改的问题，引入了 Immutable 不可变对象的概念。要求传入文本库的很多对象，只要命名上带了 Immutable 就是要求对象不可变。加入文本之后，不可再更改对象的字段和属性

